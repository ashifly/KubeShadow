# Persistent volume with host path (vulnerable)
apiVersion: v1
kind: PersistentVolume
metadata:
  name: host-path-pv
spec:
  capacity:
    storage: 1Gi
  accessModes:
  - ReadWriteMany
  hostPath:
    path: /tmp/kubeshadow-data
---
# Persistent volume claim
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: host-path-pvc
  namespace: kubeshadow-lab
spec:
  accessModes:
  - ReadWriteMany
  resources:
    requests:
      storage: 1Gi
---
# Pod using the persistent volume
apiVersion: v1
kind: Pod
metadata:
  name: volume-pod
  namespace: kubeshadow-lab
  labels:
    app: volume-pod
spec:
  serviceAccountName: kubeshadow-sa
  containers:
  - name: volume-container
    image: alpine:latest
    command: ["sleep", "3600"]
    volumeMounts:
    - name: data-volume
      mountPath: /data
  volumes:
  - name: data-volume
    persistentVolumeClaim:
      claimName: host-path-pvc
