# Privileged pod (high risk)
apiVersion: v1
kind: Pod
metadata:
  name: privileged-pod
  namespace: kubeshadow-lab
  labels:
    app: privileged-pod
    security-level: high-risk
spec:
  serviceAccountName: kubeshadow-sa
  containers:
  - name: privileged-container
    image: alpine:latest
    command: ["sleep", "3600"]
    securityContext:
      privileged: true
      runAsUser: 0
    volumeMounts:
    - name: host-root
      mountPath: /host
  volumes:
  - name: host-root
    hostPath:
      path: /
---
# Pod with host network access
apiVersion: v1
kind: Pod
metadata:
  name: host-network-pod
  namespace: kubeshadow-lab
  labels:
    app: host-network-pod
    security-level: medium-risk
spec:
  serviceAccountName: kubeshadow-sa
  hostNetwork: true
  containers:
  - name: network-container
    image: nginx:alpine
    ports:
    - containerPort: 80
---
# Pod with host PID access
apiVersion: v1
kind: Pod
metadata:
  name: host-pid-pod
  namespace: kubeshadow-lab
  labels:
    app: host-pid-pod
    security-level: medium-risk
spec:
  serviceAccountName: kubeshadow-sa
  hostPID: true
  containers:
  - name: pid-container
    image: alpine:latest
    command: ["sleep", "3600"]
---
# Pod with sensitive volume mounts
apiVersion: v1
kind: Pod
metadata:
  name: sensitive-volumes-pod
  namespace: kubeshadow-lab
  labels:
    app: sensitive-volumes-pod
    security-level: high-risk
spec:
  serviceAccountName: kubeshadow-sa
  containers:
  - name: volume-container
    image: alpine:latest
    command: ["sleep", "3600"]
    volumeMounts:
    - name: etc-volume
      mountPath: /etc
    - name: var-volume
      mountPath: /var
  volumes:
  - name: etc-volume
    hostPath:
      path: /etc
  - name: var-volume
    hostPath:
      path: /var
---
# Secure pod for comparison
apiVersion: v1
kind: Pod
metadata:
  name: secure-pod
  namespace: kubeshadow-lab
  labels:
    app: secure-pod
    security-level: secure
spec:
  serviceAccountName: kubeshadow-sa
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    fsGroup: 2000
  containers:
  - name: secure-container
    image: alpine:latest
    command: ["sleep", "3600"]
    securityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      runAsNonRoot: true
      runAsUser: 1000
---
# Pod with resource limits
apiVersion: v1
kind: Pod
metadata:
  name: resource-limited-pod
  namespace: kubeshadow-lab
  labels:
    app: resource-limited-pod
    security-level: secure
spec:
  serviceAccountName: kubeshadow-sa
  containers:
  - name: limited-container
    image: alpine:latest
    command: ["sleep", "3600"]
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
